<!DOCTYPE html>

















<html lang="en-us">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>Colima 初体验 - Lullaby</title>

  
  
  <meta name="description" content="背景 很长一段时间 Docker Desktop 都无法在线更新，点击更新后图标一直转，但是始终无法更新；之前在 Docker 社区论坛看到有不少人都有遇到过这个问题，至今也没有好的解决方案，基本都是手动下载最新镜像重新安装； Docker 官方社区论坛讨论：Docker Desktop won’t update on MacOS Docker Desktop 资源消耗严重，com.docker.hyperkit 进程占用超 10G，虽然有虚拟内存，但看着实属膈应，CPU 有时也占用过多导致风扇狂转，也比较耗电； 可视化界面有点鸡肋，没有太大作用，而且是用内存大户 Electron 写的，天下苦 Electron 久矣。 Colima 介绍 Colima 是基于 Lima 开发的，Lima 基于 QEMU，支持 ARM，M1，Docker，containerd，Kubernetes，端口转发，卷挂载等；
按官方说法：是在 macOS 或 Linux 上所需最少设置的容器运行时。
Colima 安装问题 具体安装方法在其 GitHub 主页，这里只列举安装过程可能会遇到的问题：
brew 安装过程中可能会遇到某些依赖包下载不下来，可以多尝试几次，brew 不会全量重新下载，会缓存已下载的包，或者修改 brew 镜像源地址； 中科大镜像源 清华大学开源软件镜像站 阿里云镜像源 Colima 启动问题 执行 colima start 时会从 GitHub 拉取 alpine-lima-clm-3.14.6-x86_64.iso 镜像（277.9M），由于国内网络原因始终无法完整的拉取，想着应该可以手动下载并放在指定位置，正准备研究源码时发现了这篇文章 记 mac 下尝鲜 colima 的坎坷经历，作者跟我遇到了一样的问题，于是参考他的方案解决了此问题，在此表示感谢；
参考源码地址
解决方案步骤： 手动下载 alpine-lima-clm-3." />
  <meta name="author" content="kopever" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://kopever.com/app.min.css" />

  
  <link rel="preload stylesheet" as="style" href="https://kopever.com/an-old-hope.min.css" />
  <script
    defer
    src="https://kopever.com/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  <link rel="preload" as="image" href="https://kopever.com/theme.png" />

  
  <link rel="preload" as="image" href="https://kopever.com/twitter.svg" />
  
  <link rel="preload" as="image" href="https://kopever.com/github.svg" />
  
  <link rel="preload" as="image" href="https://kopever.com/instagram.svg" />
  

  
  <link rel="icon" href="https://kopever.com/favicon.ico" />
  <link rel="apple-touch-icon" href="https://kopever.com/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.101.0" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="Colima 初体验" />
<meta property="og:description" content="背景 很长一段时间 Docker Desktop 都无法在线更新，点击更新后图标一直转，但是始终无法更新；之前在 Docker 社区论坛看到有不少人都有遇到过这个问题，至今也没有好的解决方案，基本都是手动下载最新镜像重新安装； Docker 官方社区论坛讨论：Docker Desktop won’t update on MacOS Docker Desktop 资源消耗严重，com.docker.hyperkit 进程占用超 10G，虽然有虚拟内存，但看着实属膈应，CPU 有时也占用过多导致风扇狂转，也比较耗电； 可视化界面有点鸡肋，没有太大作用，而且是用内存大户 Electron 写的，天下苦 Electron 久矣。 Colima 介绍 Colima 是基于 Lima 开发的，Lima 基于 QEMU，支持 ARM，M1，Docker，containerd，Kubernetes，端口转发，卷挂载等；
按官方说法：是在 macOS 或 Linux 上所需最少设置的容器运行时。
Colima 安装问题 具体安装方法在其 GitHub 主页，这里只列举安装过程可能会遇到的问题：
brew 安装过程中可能会遇到某些依赖包下载不下来，可以多尝试几次，brew 不会全量重新下载，会缓存已下载的包，或者修改 brew 镜像源地址； 中科大镜像源 清华大学开源软件镜像站 阿里云镜像源 Colima 启动问题 执行 colima start 时会从 GitHub 拉取 alpine-lima-clm-3.14.6-x86_64.iso 镜像（277.9M），由于国内网络原因始终无法完整的拉取，想着应该可以手动下载并放在指定位置，正准备研究源码时发现了这篇文章 记 mac 下尝鲜 colima 的坎坷经历，作者跟我遇到了一样的问题，于是参考他的方案解决了此问题，在此表示感谢；
参考源码地址
解决方案步骤： 手动下载 alpine-lima-clm-3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kopever.com/post/colima-journey/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-07-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-07-08T00:00:00+00:00" />


  
  <meta itemprop="name" content="Colima 初体验">
<meta itemprop="description" content="背景 很长一段时间 Docker Desktop 都无法在线更新，点击更新后图标一直转，但是始终无法更新；之前在 Docker 社区论坛看到有不少人都有遇到过这个问题，至今也没有好的解决方案，基本都是手动下载最新镜像重新安装； Docker 官方社区论坛讨论：Docker Desktop won’t update on MacOS Docker Desktop 资源消耗严重，com.docker.hyperkit 进程占用超 10G，虽然有虚拟内存，但看着实属膈应，CPU 有时也占用过多导致风扇狂转，也比较耗电； 可视化界面有点鸡肋，没有太大作用，而且是用内存大户 Electron 写的，天下苦 Electron 久矣。 Colima 介绍 Colima 是基于 Lima 开发的，Lima 基于 QEMU，支持 ARM，M1，Docker，containerd，Kubernetes，端口转发，卷挂载等；
按官方说法：是在 macOS 或 Linux 上所需最少设置的容器运行时。
Colima 安装问题 具体安装方法在其 GitHub 主页，这里只列举安装过程可能会遇到的问题：
brew 安装过程中可能会遇到某些依赖包下载不下来，可以多尝试几次，brew 不会全量重新下载，会缓存已下载的包，或者修改 brew 镜像源地址； 中科大镜像源 清华大学开源软件镜像站 阿里云镜像源 Colima 启动问题 执行 colima start 时会从 GitHub 拉取 alpine-lima-clm-3.14.6-x86_64.iso 镜像（277.9M），由于国内网络原因始终无法完整的拉取，想着应该可以手动下载并放在指定位置，正准备研究源码时发现了这篇文章 记 mac 下尝鲜 colima 的坎坷经历，作者跟我遇到了一样的问题，于是参考他的方案解决了此问题，在此表示感谢；
参考源码地址
解决方案步骤： 手动下载 alpine-lima-clm-3."><meta itemprop="datePublished" content="2022-07-08T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-07-08T00:00:00+00:00" />
<meta itemprop="wordCount" content="117">
<meta itemprop="keywords" content="" />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Colima 初体验"/>
<meta name="twitter:description" content="背景 很长一段时间 Docker Desktop 都无法在线更新，点击更新后图标一直转，但是始终无法更新；之前在 Docker 社区论坛看到有不少人都有遇到过这个问题，至今也没有好的解决方案，基本都是手动下载最新镜像重新安装； Docker 官方社区论坛讨论：Docker Desktop won’t update on MacOS Docker Desktop 资源消耗严重，com.docker.hyperkit 进程占用超 10G，虽然有虚拟内存，但看着实属膈应，CPU 有时也占用过多导致风扇狂转，也比较耗电； 可视化界面有点鸡肋，没有太大作用，而且是用内存大户 Electron 写的，天下苦 Electron 久矣。 Colima 介绍 Colima 是基于 Lima 开发的，Lima 基于 QEMU，支持 ARM，M1，Docker，containerd，Kubernetes，端口转发，卷挂载等；
按官方说法：是在 macOS 或 Linux 上所需最少设置的容器运行时。
Colima 安装问题 具体安装方法在其 GitHub 主页，这里只列举安装过程可能会遇到的问题：
brew 安装过程中可能会遇到某些依赖包下载不下来，可以多尝试几次，brew 不会全量重新下载，会缓存已下载的包，或者修改 brew 镜像源地址； 中科大镜像源 清华大学开源软件镜像站 阿里云镜像源 Colima 启动问题 执行 colima start 时会从 GitHub 拉取 alpine-lima-clm-3.14.6-x86_64.iso 镜像（277.9M），由于国内网络原因始终无法完整的拉取，想着应该可以手动下载并放在指定位置，正准备研究源码时发现了这篇文章 记 mac 下尝鲜 colima 的坎坷经历，作者跟我遇到了一样的问题，于是参考他的方案解决了此问题，在此表示感谢；
参考源码地址
解决方案步骤： 手动下载 alpine-lima-clm-3."/>

  
  
</head>


  <body class="not-ready" data-menu="true">
    <header class="header">
  
  <p class="logo">
    <a class="site-name" href="https://kopever.com/">Lullaby</a><a class="btn-dark"></a>
  </p>
  

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  
  
  <nav class="menu">
    
    <a class="" href="/about/">About</a>
    
  </nav>
  

  
  <nav class="social">
    
    <a
      class="twitter"
      style="--url: url(./twitter.svg)"
      href="https://twitter.com/kopstill"
      target="_blank"
    ></a>
    
    <a
      class="github"
      style="--url: url(./github.svg)"
      href="https://github.com/kopstill"
      target="_blank"
    ></a>
    
    <a
      class="instagram"
      style="--url: url(./instagram.svg)"
      href="https://instagram.com/kopstill"
      target="_blank"
    ></a>
    
  </nav>
  
</header>


    <main class="main">

<article class="post-single">
  <header class="post-title">
    <p>
      
      <time>Jul 8, 2022</time>
      
      
      <span>kopever</span>
      
    </p>
    <h1>Colima 初体验</h1>
  </header>
  <section class="post-content"><h3 id="背景">背景</h3>
<ol>
<li>很长一段时间 Docker Desktop 都无法在线更新，点击更新后图标一直转，但是始终无法更新；之前在 Docker 社区论坛看到有不少人都有遇到过这个问题，至今也没有好的解决方案，基本都是手动下载最新镜像重新安装；
<ul>
<li>Docker 官方社区论坛讨论：<a href="https://forums.docker.com/t/docker-desktop-wont-update-on-macos/114648" target="_blank">Docker Desktop won’t update on MacOS</a></li>
</ul>
</li>
<li>Docker Desktop 资源消耗严重，com.docker.hyperkit 进程占用超 10G，虽然有虚拟内存，但看着实属膈应，CPU 有时也占用过多导致风扇狂转，也比较耗电；</li>
<li>可视化界面有点鸡肋，没有太大作用，而且是用内存大户 Electron 写的，天下苦 Electron 久矣。</li>
</ol>
<h3 id="colima-介绍">Colima 介绍</h3>
<p><a href="https://github.com/abiosoft/colima" target="_blank">Colima</a> 是基于 <a href="https://github.com/lima-vm/lima" target="_blank">Lima</a> 开发的，Lima 基于 <a href="https://github.com/qemu/qemu" target="_blank">QEMU</a>，支持 ARM，M1，Docker，containerd，Kubernetes，端口转发，卷挂载等；<br>
按官方说法：是在 macOS 或 Linux 上所需最少设置的容器运行时。</p>
<h3 id="colima-安装问题">Colima 安装问题</h3>
<p>具体安装方法在其 GitHub 主页，这里只列举安装过程可能会遇到的问题：</p>
<ol>
<li>brew 安装过程中可能会遇到某些依赖包下载不下来，可以多尝试几次，brew 不会全量重新下载，会缓存已下载的包，或者修改 brew 镜像源地址；
<ul>
<li><a href="https://mirrors.ustc.edu.cn/help/brew.git.html" target="_blank">中科大镜像源</a></li>
<li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank">清华大学开源软件镜像站</a></li>
<li><a href="https://developer.aliyun.com/mirror/homebrew" target="_blank">阿里云镜像源</a></li>
</ul>
</li>
</ol>
<h3 id="colima-启动问题">Colima 启动问题</h3>
<ol>
<li>执行 colima start 时会从 GitHub 拉取 alpine-lima-clm-3.14.6-x86_64.iso 镜像（277.9M），由于国内网络原因始终无法完整的拉取，想着应该可以手动下载并放在指定位置，正准备研究源码时发现了这篇文章 <a href="https://stanzhai.site/blog/post/stanzhai/%E8%A7%A3%E5%86%B3mac%E4%B8%8B%E4%BD%BF%E7%94%A8brew%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85colima%E6%8A%A5%E9%94%99%E7%9A%84%E9%97%AE%E9%A2%98" target="_blank">记 mac 下尝鲜 colima 的坎坷经历</a>，作者跟我遇到了一样的问题，于是参考他的方案解决了此问题，在此表示感谢；<br>
<a href="https://github.com/lima-vm/lima/blob/44454dd1285a0baba13ec0538f1f1b37b31160d5/pkg/qemu/qemu.go#L77" target="_blank">参考源码地址</a><br>
<strong>解决方案步骤：</strong>
<ul>
<li>手动下载 alpine-lima-clm-3.14.6-x86_64.iso 镜像；</li>
<li>重命名镜像名字为 basedisk；</li>
<li>将 basedisk 放到 ~/.lima/colima/ 目录下。</li>
</ul>
</li>
</ol>
<h3 id="使用问题">使用问题</h3>
<ol>
<li>使用 docker-compose（需手动安装 brew install docker-compose）时遇到错误：<br>
error getting credentials - err: exec: &ldquo;docker-credential-desktop&rdquo;: executable file not found in $PATH<br>
参考此 GitHub Issue <a href="https://github.com/abiosoft/colima/issues/265" target="_blank">Unable to use docker-compose / docker compose with colima</a>；<br>
<strong>解决方案：</strong>
<ul>
<li>将 ~/.docker/config.json 文件中的 credsStore 改为 credStore。</li>
</ul>
</li>
</ol>
</section>

  
  

  
  
  
  <nav class="post-nav">
     
    <a class="next" href="https://kopever.com/post/shadowsocks-server/"><span>Shadowsocks 服务端教程</span><span>→</span></a>
    
  </nav>
  

  
  
</article>

</main>

    <footer class="footer">
  <p>&copy; 2022 <a href="https://kopever.com/">Lullaby</a></p>
  <p>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</p>
  <p>
    <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper 5.1</a>
  </p>
</footer>

  </body>
</html>
